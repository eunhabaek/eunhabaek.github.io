---
title: "CI/CD 개요"

categories:
  - CI/CD
last_modified_at: 2023-08-23
---

CI/CD
-----

*   애플리케이션 개발 단계를 자동화해서 애플리케이션을 보다 짧은 주기로 고객에게 제공

*   새로운 코드 통합으로 개발 및 운영 팀에 빈번히 발생했던 Integration Hell 문제를 해결하기 위한 방법

*   지속적인 통합이 제대로 구현되면 애플리케이션 코드의 새로운 변경 사항이 정기적으로 빌드 및 테스트를 거쳐 공유 레포지토리에 병합되므로 여러 명의 개발자가 동시에 애플리케이션 개발과 관련된 코드 작업을 할 경우 서로 충돌이 발생하는 문제를 해결할 수 있음

CI(Continuous integration)
--------------------------

*   개발 팀이 작은 변경 사항을 구현하고 코드를 버전 제어 레포지토리에 자주 체크인하도록 하는 코딩 철학이자 관행

*   최신 애플리케이션은 다양한 플랫폼 과 도구에서 코드를 개발해야 하기 때문에 팀은 변경 사항을 통합하고 검증하기 위한 메커니즘이 필요

*   이러한 문제 때문에 버전 제어 레포지토리를 사용할 때 IDE가 제공하는 기능을 사용하지 않고 Command Line Interface 에서 명령어를 이용합니다.

*   소프트웨어 공학에서는 지속적 통합은 지속적으로 품질 관리를 적용하는 프로세스를 실행하는 것

CD(Continuous delivery)
-----------------------

*   개발자들이 앱에 적용한 변경 사항이 버그 테스트 거쳐 자동 업로드 되는 것

*   운영팀은 실시간 프로덕션 환경으로 배포 (액션이나 이벤트 이용)

CD(Continuous deployment)
-------------------------

*   전달에 이어서 배포 및 릴리즈까지 자동화

*   앱보다 웹이 자동 배포가 쉬움

### 전통적 방식

*   고객

*   개발자
    
    *   분석, 계획, 구현, 단위 테스트, 시연
    
    *   scrum이나 kanban 등의 애자일 기법으로 개발 속도 높이고 의견 원활하게 함
    
    *   제품 시연자리 만들어 빠르게 피드백 받고 TDD나 eXtreme Programming 같은 개발 기법 수용
    
    *   구현 후 QA팀에게 전달

*   QA
    
    *   통합 테스트, 인수 테스트, 비기능 분석
    
    *   UAT 수행하게 되는데 테스트 영향 없도록 트렁크 코드는 프리징하고 진행
    
    *   테스트 시 버그 발견되면 개발팀에게 할당, 승인되면 릴리즈

*   운영
    
    *   릴리즈, 모니터링
    
    *   문제 발생 시 개발자에게 전달

*   문제점
    
    *   느린 인도 기간
    
    *   느린 피드백 주기
    
    *   자동화 미비
    
    *   위험한 핫픽스(간단 테스트)
    
    *   의사소통 부족
    
    *   책임 분산
    
    *   낮은 업무 만족도
    
    *   스트레스

*   최근 방식
    
    *   별도 업무 나누지 않고 애자일로 하나의 팀이 모두 담당
    
    *   장점
        
        *   빠른 인도와 피드백
        
        *   유연하고 안정적인 릴리즈

### Auto-deployment pipline

⇒ 코드 repo에 변경 있을시 마다 실행되어 배포 자동화

1.  지속적 통합
    
    *   개발자에게 처음 피드백 제공
    
    *   repo에서 코드 checkout 후 컴파일 후 단위테스트하여 품질 검증
    
    *   최근에는 TDD
    
    *   실패시 파이프라인 중단되므로 CI 빌드 수정 필요
    
    *   서비스 안정성 고려하여 커밋 타이밍 중요

2.  자동 인수 테스트
    
    *   구현 기능이 요구사항과 맞는지 확인
    
    *   이전에 수동으로 진행하던 테스트를 고객과 QA 팀이 자동으로 진행
    
    *   끝에서 진행하지 않고 시작 단계에서부터 테케 만들고 고객과 긴밀히 협력
    
    *   종류
        
        *   인수 테스트
            
            *   비즈니스 관점에서 본 기능적 요구 사항을 검증
            
            *   고객과 개발자가 합의한 sw 동작 방싯을 스토리나 예제 형식으로 제공
        
        *   단위 테스트
            *   버그를 최소화하고 sw 품질을 향상하도록 개발자가 진행하는 테스트
        
        *   탐색적 테스트(수동)
            
            *   수동으로 하는 블랙박스 테스트
            
            *   기능을 중점적 파악, 경험 바탕이기에 자동 어려움
            
            *   시스템 문제 찾거나 개선
        
        *   비기능 테스트
            *   성능, 확장성, 보안 등 속성 테스트
        
        *   통합 테스트
            *   모듈형 앱 개발시 수행 msa의 단위 테스트는 통합 테스트 대체하기도 함
        
        *   단위 테스트 → 통합 테스트 → 인수 테스트
    
    ### 구성 관리
    
    *   수동 운영 대체 환경 구성 및 sw 배포
    
    *   sw와 환경변화 추적, 제어
    
    *   필수도구 준비 및 설치, 앱 버전 및 인프라 설정
    
    *   엔서브, 셰프, 퍼핏 등 관리도구 사용해서 관리 파일로 버전 관리, 변경사항 추적 가능
    
    *   운영팀의 수동 작업 대체 분야는 앱 모니터링으로 시스템 로그나 지표를 개발자나 데브옵스 팀이 실시간으로 스트리밍
    
    ### 구성 도구
    
    *   컨테이너: docker, k8s
    
    *   CI/CD 파이프라인과 자동화 script : jenkins
    
    *   형상관리: github
    
    *   프로비저닝, 구성관리 및 배포: ansible, argo CD
    
    ### 버전 관리 시스템
    
    *   개요
        
        *   파일 변화를 시점마다 기록하여 다시 롤백가능하게 함
        
        *   모든 컴퓨터의 파일이 버전관리 대상
        
        *   디자이너도 버전 관리 시스템 사용 권고
        
        *   누가 언제 수정하고 이슈가 만들어졌는지 추적 가능
    
    *   종류
        
        *   로컬 버전 관리 시스템
            
            *   로컬에 버전관리 필요한 파일 복사 혹은 db에 변경사항 기록
            
            *   ex) mac os는 x-code 설치(운영시스템도같이 설치됨)시 rcs 시스템 설치 되어서 각 리비전 간의 패치 세트를 만들어 데이터의 차이를 저장
        
        *   중앙 집중식 버전 관리 시스템(Client Server Model)
            
            *   외부 개발자와의 협업 문제 해결하기 위해 개발
            
            *   CVS, Subversion, Perforce와 같은 시스템들이 속하며 다수의 클라이언트 존재
            
            *   누구나 다른 사람이 무엇을 하고 있는 지 알 수있고 관리자의 관리도 쉬움
            
            *   단일장애점 가짐(중앙 서버)
        
        *   분산 버전 관리 시스템
            
            *   git, mercurial, bazaar, darcs 등이 대표적 분산 버전 관리 시스템, 마지막 파일 스냅샷 가져오는게 아니라 저장소 자체를 복사
            
            *   다수의 원격 저장소 가질 수 있기에 동시에 여러 그룹과 여러 방법으로 함께 작업할 수 있어서 중앙 집중 시스템에서 할 수 없는 계층 모델 등 다양한 작업 방식 사용 가능
        
        *   예시
            
            *   CVS
                *   클라이언트 서버 방식의 버전 관리 시스템
            
            *   Subversion
                *   CVS를 개선한 클라이언트 서버 방식의 버전 관리 시스템
            
            *   Mercurial
                *   구글에서 관리 지원하고 있는 분산 모델의 버전 관리 시스템
            
            *   Git
                
                *   분산 버전 관리 시스템
                
                *   자유 sw
                
                *   장점
                    
                    *   github, gitlab등 이용하는 공유 사이트가 많음
                    
                    수
