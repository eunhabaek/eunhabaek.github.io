# 인프라 기초 정리

## 인프라란?  
: IT 환경을 운영하고 관리하는데 필요한 HW, 미들웨어, 네트워크, OS 등 IT 자원

## 인프라 구성 요소

### 1) 하드웨어
: IT의 물리적인 구성요소, 즉 컴퓨터, 데이터 센터, 스위치, 라우터, 허브, 서버, 모바일 장치 등
### 2) 미들웨어
: 운영체제와 응용 프로그램 사이에서 운영체제가 제공하는 서비스 이외에 추가적인 서비스를 제공하는 소프트웨어. 미들웨어 종류로는 DB, RPC, MOM, TP-Monitor, WAS 등이 있다.
### 3) 네트워크
: 무선으로 서버를 연결하는 도구. 라우터, 스위치, 방화벽 등 네트워크 장비와 이를 연결하는 케이블 배선 및 사용자가 단말에서 무선으로 연결할 때 필요한 액세스 포인트(Access Point, AP) 등을 포함
### 4) 운영체제
: 하드웨어와 네트워크 장비를 제어하기 위한 기본적인 소프트웨어로 리소스나 프로세스를 관리

## 하이퍼 컨버지드 인프라 (HCI)
: 서버, 스위치, 스토리지를 합쳐서 클러스터를 구성하는 인프라의 형태
(reference)[https://gnidoc.tistory.com/entry/HCIhyper-converged-infrastructure%EB%9E%80]
![image](https://github.com/eunhabaek/eunhabaek.github.io/assets/67853963/69dddb95-c850-466a-9299-6e08fab2996e)
![image](https://github.com/eunhabaek/eunhabaek.github.io/assets/67853963/ef72509e-8539-4b11-b20a-37e7762fede8)

## 온프레미스와 클라우드
###  온프레미스
: 데이터 센터나 서버실에 서버를 두고 직접 관리하는 전통적인 방식. 직접 관리할 수 있다는 장점도 있으나 초기 투자 비용이 크고 유지비용 낭비 및 유연성이 떨어진다는 단점이 있음
### 퍼블릭 클라우드
: CSP를 통해 인터넷을 통해 불특정 다수에게 온디멘드 서비스 형태로 제공되는 클라우드. 
### 프라이빗 클라우드
: 특정 사용자 전용 클라우드로 기업 내 서비스 같이 보안과 독자적 서비스를 활용하기 쉬움

## 클라우드가 유리한 경우
- 트래픽 예상이 어렵거나 잠시 사용이 필요한 경우
- 인프라 구축 및 운영 인력이 어려운 스타트업 등의 기업
- 글로벌 서비스를 제공할 경우

## 온프레미스가 유리한 경우
- 물리적인 보안 관리가 가능하게 되며 장기적인 유지보수 비용이 클라우드 서버에 비해 저렴
- 기밀성이 높은 데이터의 경우에도 온프레미스가 유리
- 사용자에 맞춤 시스템 구축 가능

## CPU와 GPU
### CPU
- CPU의 성능은 코어와 캐시에 영향을 받음
- ALU(연산 장치), 레지스터(기억 장치), 제어 장치로 구성되어 있음 
- 직렬 처리에 특화된 프로세서
- 시스템 버스(주소, 데이터, 제어)와 메모리와 함께 연산을 수행함

### GPU
- 그래픽 및 병렬 처리에 유리한 프로세서
- CPU에 비해 ALU가 매우 많음

## 방화벽
: 보안을 위해 내부 네트워크와 외부 네트워크의 통신을 제어하고 불필요한 통신을 차단
- 패킷 필터형 : 전송 계층이나 인터넷 계층에서 통과하는 패킷을 포트 번호나 IP 주소를 바탕으로 필터링
- 애플리케이션 게이트웨이형 : 애플리케이션 프로토콜 레벨에서 외부와의 통신을 제어하는 방식으로 일반적으로 프록시 서버라고 부름. 일부 프로토콜만 지원

## MAC 주소
- 하드웨어 장비의 고유 이더넷 주소
- 물리적으로 할당되는 48bit 주소
- 데이터 계층(layer2)에서 사용하는 주소

## IP 주소
- 인터넷, 인트라넷 등 네트워크에 연결된 장비에 할당되는 번호
- IPv4는 32 bit, IPv6는 128 bit
- 공인 IP와 사설 IP간 변환은 NAT을 이용
  
## VPN
- 가상 사설망으로 인터넷 망을 사설망처럼 이용 가능
- 통신선을 새로 만드는 방식으로 데이터를 암호화하여 통신
- TCP/UDP 위에 IP 프로토콜을 캡슐화하여 IP 암호화 가능

## 통신 프로토콜
:통신을 할 때에는 서로 어떻게 메시지를 주고 받을지 정한 규칙 (데이터 형식, 신호 레벨 등)

## OSI 모델
네트워크 통신 기능을 7개의 계층 구조로 나눈 모델로, 통신이 일어나는 과정을 단계별로 파악할 수 있게 함. 데이터가 네트워크로 나갈 때는 위층에서부터, 네트워크에서 데이터를 받을 때는 아래층에서부터 들어옴

### 1) 물리 계층
- 케이블을 통해 직접 연결하여 통신
- 1과 0의 전기 신호로 데이터를 전송
- 데이터와 에러는 신경 쓰지 X
- 전송단위: bit
- 장비: 케이블, 리피터(신호 증폭 장치), 허브(리피터 역할+여러 장치 연결 가능, 동시 전송 불가)

### 2) 데이터 계층
- 물리 계층의 정보를 안전하게 전달
- 통신 오류(순환 반복 방식;CRC)를 찾고 재전송도 수행 (흐름제어, 오류제어)
- 주소: MAC 주소
- 프로토콜: 이더넷
- 전송단위: 프레임
- 장비: 브리지(네트워크 세그먼트 연결), 스위치(브리지+빠른 속도)

### 3) 네트워크 계층
- 데이터를 목적지까지 안전하고 빠르게 전달(라우팅)
- 비연결성 데이터그램 방식 전달, 안전 보장 X
- 수신 및 발신 주소 포함 (IPv4 헤더, IPv6 헤더, IP 주소)
- 주소: IP 주소
- 프로토콜: IP(패킷전달), ICMP(패킷 에러 진단)
- 전송단위: 패킷
- 장비: 라우터(최적 경로로 데이터 전달)

### 4) 전송 계층
- 프로세스 간 통신을 활성화하기 위한 계층
- 패킷의 전송이 유효한 지 확인하고 실패한 패킷은 다시 전송 (흐름제어, 오류제어, 중복 검사)
- 주소: 포트
- 프로토콜: TCP, UDP
- 전송단위: 세그먼트
- 장비: L4 스위치

#### 4-1) TCP 프로토콜
- 신뢰적인 전송을 보장 (패킷 손실, 중복, 순서 보장)
- 연결 지향적
- 연결 생성: 3 way handshake
  - 1. 클라이언트 -> 서버 : 연결 요청 패킷 전송
  - 2. 서버 -> 클라이언트 : 연결 요청 패킷 + 수신 확인 응답
  - 3. 클라이언트 -> 서버 : 수신 확인 응답

#### 4-2) UDP 프로토콜
- 신뢰성이 낮은 프로토콜로 완전성 보증 X
- 비연결성, 순서화되지 않은 데이터그램 서비스
- 빠른 데이터 전송, 멀티캐스팅 가능
- 실시간 응용에 적합

### 5) 세션 계층
- 데이터가 통신하기 위한 논리적인 연결
- 세션 설정, 유지, 종료, 복구
- 프로토콜: RPC, NetBIOS

### 6) 표현 계층
- 데이터 포맷을 인식하여 인코딩 혹은 암호화, 압축
- 프로토콜: JPEG, MPEG


### 7) 응용 계층
- 사용자 인터페이스를 통해 응용 서비스를 수행, 데이터 생성
- 프로토콜: HTTP(80), FTP(20), SMTP(25), Telnet(23)

#### 7-1) HTTP 프로토콜
- 포트: 80
- 웹 서비스에서 클라이언트(웹 브라우저)와 웹 서버 간에 정보를 주고받기 위해 사용되는 네트워크 프로토콜
- 트랜잭션 중심의 비연결성 프로토콜
- GET, PUT 등의 요청을 전송하고 숫자 코드등으로 응답을 받음
#### 7-2) HTTPS 프로토콜
- 포트: 443
- SSL/TSL 인증을 통해 데이터 전달
- 프로세스
  1. 클라이언트가 서버로 연결 시도
  2. 서버는 공개키(인증서)를 클라이언트에게 전달
  3. 클라이언트는 인증서의 유효성을 검사하고 세션 키 발급
  4. 클라이언트가 서버의 공개 키로 세션 키를 암호화 하여 서버로 전송
  5. 서버는 개인키로 암호화된 세션키를 복호화해서 세션 키를 얻음
  6. 클라이언트와 서버는 동일한 세션 키를 공유하므로 데이터 전달 시 세션키로 암호화/복호화 진행

#### 7-3) FTP 프로토콜
- 포트: 20
- 서버와 클라이언트 간에 파일을 전송하기 위한 프로토콜
#### 7-4) SMTP 프로토콜
- 포트: 25
- 인터넷에서 메일을 송신하는 데 사용하는 프로토콜
#### 7-5) Telnet 프로토콜
- 포트: 23

## 암호화 방식
### 대칭 키 암호화
- 클라이언트와 서버가 동일한 키를 사용해 암호화/복호화를 진행함
- 연산 속도가 빠름
- 키가 노출되면 위험, 방대한 키 관리
- DES, AES, SEED, ARIA
  
### 비대칭 키 암호화
![image](https://github.com/eunhabaek/eunhabaek.github.io/assets/67853963/995b1718-a5b2-418c-ab70-d723eba9f4b1)
- 1개의 쌍으로 구성된 공개키와 개인키를 암호화/복호화 하는데 사용함
- 키가 노출되어도 비교적 안전하지만 연산 속도가 느림

## ethernet
## LAN, WAN, VLAN
## nginx
## tomcat


## 참고 자료
https://futurecreator.github.io/2018/11/09/it-infrastructure-basics/  
https://www.servicenow.com/kr/products/it-operations-management/what-is-it-infrastructure.html   https://shlee0882.tistory.com/110
