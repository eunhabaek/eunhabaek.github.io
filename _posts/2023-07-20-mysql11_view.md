---
title: "MySQL VIEW"
excerpt: "MySQL의 인라인 뷰와 뷰"

categories:
  - database
tags:
  - MySQL
last_modified_at: 2023-07-20
---

## VIEW란?

> **가상의 테이블**
> 

물리적으로 존재하지 않으나 테이블처럼 사용 가능

- 목적
    - **속도**: VIEW 생성 구문은 메모리에 적재하므로 빠름
    - **보안**: 사용자에게 VIEW 제공 시 사용자는 테이블 구조 알 필요 없음
    

## VIEW의 종류

### 1. INLINE VIEW

> FROM 절에서 작성한 서브 쿼리
> 

하나의 SELECT 구문은 테이블 구조의 RESULT SET  리턴

```sql
-- INLINE VIEW
SELECT * FROM (SELECT 절) 이름; 
```

- SQL 구문이 복잡해질 때 메모리 부담을 줄이기 위해서 사용
    
    ```sql
    -- 조인으로 인해 많은 데이터 저장 됨
    SELECT *
    FROM EMP,DEPT
    WHERE EMP.DEPTNO =DEPT.DEPTNO AND JOB='CLERK';
    
    -- 인라인 뷰로 미리 필터링하여 메모리 부담 줄일 수 있음
    SELECT *
    FROM (SELECT * FROM EMP WHERE JOB='CLERK') TEMP ,DEPT
    WHERE TEMP.DEPTNO =DEPT.DEPTNO;
    ```
    

### 2. VIEW

> CREATE VIEW 로 생성된 일반적인 VIEW
> 
- 형식:
    
    ```sql
    CREATE [OR REPLACE] VIEW 뷰이름  
    AS 
    SELECT 구문   
    [WITH CHECK OPTION]  
    [WITH READ ONLY]
    ```
    
- MySQL 버전에 따라 OR REPLACE 지원하지 않는 경우 있음
- **WITH CHECK OPTION**
    - VIEW로 DML 작업 할 때 SELECT 구문에서 조회된 데이터만 가능하도록 하는 옵션, 데이터베이스에 직접 접속했을 때만 가능→ 데이터베이스에서 제공하지 않는 접속도구 사용 시 수행 불가
- **WITH READ ONLY**
    - 읽기 전용의 뷰를 생성
    - DML 불가
- 특징
    - VIEW는 SELECT 구문 가지고 있다가 호출 시 SELECT 구문 수행, 결과 리턴
        
        ```sql
        -- 일반 VIEW 만들기 
        CREATE VIEW SAMPLE
        AS
        SELECT EMPNO,SAL,ENAME
        FROM EMP;
        
        -- VIEW를 테이블처럼 사용 가능
        SELECT *
        FROM SAMPLE;
        ```
        
    - VIEW에서 DML 작업 불가능한 경우
        - 2개 이상의 테이블로 생성하거나 NOT NULL 컬럼있을 시 DML 불가
    - VIEW에서 DML 작업 시 원본이 수정 됨
        
        ```sql
        -- VIEW에 데이터 삽입 -> 원본 테이블과 VIEW에 둘 다 데이터 삽입 됨
        INSERT INTO SAMPLE() VALUES(7777,5000,'EUNHA');
        ```
        
    - VIEW는 구조 변경 불가 → ALTER 불가
- VIEW 삭제
    - DROP VIEW 뷰이름;